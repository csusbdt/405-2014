---
layout: assignment
title: Json Assignment
---

<div class="csusbdt-video-btn">
  <a class="btn btn-success" role="button" target="_blank" href="http://youtu.be/dDvGR1QZm5E">Video</a>
</div>

<h2>Overview</h2>

<p>
The purpose of this assignment is to learn how to return ajax data in the JSON format.
</p>

<h2>Assignment folder</h2>

<p>
Create a directory named <em>json</em> for the work you do for this assignment. 
At the end of the assignment, this folder will contain the following files.
</p>

<ul>
<li>app.html</li>
<li>main.js</li>
<li>root.js</li>
<li>image.js</li>
<li>message.js</li>
</ul>

<h2>Instructions</h2>

<p>
You should start the assignment by making a copy of all the files from 
<a href="https://github.com/csusbdt/405-2014/wiki/Ajax">the Ajax assignment</a>. 
This will be the starting point for your experiments.
</p>

<p>
Read about <a href="http://json.org/">the JSON data representation format</a>.
</p>

<p>
Modify <em>message.js</em> so that it returns 
the message data in the following JSON format.
</p>

<pre>
{ "msg": "Hello JSON." }
</pre>

<p>
The following code shows one way to do this.
</p>

<pre>
var responseObject = { msg: 'Hello JSON.' };
var responseString = JSON.stringify(responseObject);
var body = new Buffer(responseString, 'utf-8');
</pre>

<p>
Change the content-type header in the reply message to 
<code>application/json</code> without specifying charset.
</p>

<p class="csusbdt-callout">
I believe you should omit the charset specification when returning JSON data; see
<a href="http://stackoverflow.com/questions/13096259/can-charset-parameter-be-used-with-application-json-content-type-in-http-1-1/13098683#13098683">this Stackoverflow discussion</a>.
</p>

<p>
On the client side you should 
convert the JSON string
to a Javascript object
and then extract the message data from this object.
The following shows how to do this.
</p>

<pre>
var resDataString = httpRequest.responseText;
var resData = JSON.parse(resDataString);
var msg = resData.msg;
// Display msg to the user.
</pre>

<p>
Only display the message <em>Hello JSON</em> to the user,
do not display the JSON string.
</p>

